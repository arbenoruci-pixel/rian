<!doctype html>
<html lang="sq">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>TEPIHA â€¢ HOME</title>
<link rel="icon" href="/assets/icon.png">
<style>
  :root{color-scheme:dark}
  *{box-sizing:border-box}
  body{margin:0;background:#0a0f16;color:#eaf1ff;font-family:system-ui,-apple-system,Segoe UI,Roboto}

  /* Header */
  .header{position:sticky;top:0;z-index:5;padding:16px;background:linear-gradient(180deg,#0e1724,#0b121b 65%);border-bottom:1px solid #1a2434}
  .brand{display:flex;align-items:center;gap:12px}
  .logo{width:42px;height:42px;border-radius:14px;background:linear-gradient(180deg,#0c2718,#0b1a12);border:1px solid #165f36;display:grid;place-items:center;font-size:20px}
  .company{display:flex;flex-direction:column;gap:2px}
  .company .name{font-weight:900;letter-spacing:.6px}
  .company .sub{opacity:.7;font-size:.9rem}
  .arka{position:absolute;right:16px;top:14px;text-decoration:none;padding:12px 16px;border-radius:999px;background:linear-gradient(180deg,#1c77b8,#16639a);border:1px solid #244264;color:#fff;font-weight:900;box-shadow:0 4px 16px #0006}

  /* Mobile scale */
  .page{transform-origin: top center}
  @media (max-width:760px){ .page{transform:scale(.8)} }

  /* Shell blocks */
  .shell{background:linear-gradient(180deg,#0f1723,#0c121b);border:1px solid #1a2434;border-radius:20px;padding:16px;margin:16px;box-shadow:inset 0 1px 0 #ffffff0a, 0 8px 18px #0005}

  /* Tiles */
  .tiles{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  @media (max-width:760px){ .tiles{grid-template-columns:1fr} }
  .tile{position:relative;background:linear-gradient(180deg,#0f1826,#0c141f);border:1px solid #1c2737;border-radius:16px;padding:20px;text-decoration:none;color:inherit;box-shadow:inset 0 1px 0 #ffffff0a}
  .tile h3{margin:0;font-size:1.05rem;letter-spacing:.45px}
  .count{position:absolute;right:12px;top:12px;min-width:30px;height:30px;padding:0 10px;border-radius:999px;display:flex;align-items:center;justify-content:center;font-weight:900;border:1px solid #223148;box-shadow:0 3px 10px #0007}
  .c-red{background:#3b1116;border-color:#6d1d26}
  .c-blue{background:#0d1a2e;border-color:#223856}
  .c-green{background:#0b1a12;border-color:#165f36}

  /* Big buttons */
  .cta{display:block;text-align:center;padding:16px;border-radius:16px;margin:16px;text-decoration:none;font-weight:900;box-shadow:inset 0 1px 0 #ffffff0a, 0 8px 18px #0005}
  .cta.green{background:linear-gradient(180deg,#0f6c38,#0d4f2b);border:1px solid #16653d;color:#dcffe6}
  .cta.amber{background:linear-gradient(180deg,#8e6a19,#5d4610);border:1px solid #6b5711;color:#fff5cf}
  .cta .right{float:right;min-width:34px;height:34px;padding:0 12px;border-radius:999px;border:1px solid #0003;background:#0002;display:inline-flex;align-items:center;justify-content:center;margin-top:-4px}

  /* Search boxes */
  .group{background:linear-gradient(180deg,#0f1723,#0c121b);border:1px solid #1a2434;border-radius:20px;padding:16px;margin:16px;box-shadow:inset 0 1px 0 #ffffff0a, 0 8px 18px #0005}
  .group h4{margin:0 0 10px 0;letter-spacing:.4px}
  .search{display:flex;gap:12px}
  .search input{flex:1;background:#0e1622;border:1px solid #233145;border-radius:12px;padding:14px;color:#eaf1ff}
  .btn{padding:12px 18px;border-radius:12px;background:linear-gradient(180deg,#1c77b8,#16639a);border:1px solid #244264;color:#fff;font-weight:900;text-decoration:none}
</style>

<script type="module">
  import { countStatus, countDrafts, countReadyToday, subscribeOrders } from '/assets/home.counters.js';

  async function loadCounters(){
    const [pas, gat, mar, pap] = await Promise.all([
      countStatus('pastrim'),
      countStatus('gati'),
      countReadyToday(),
      countDrafts()
    ]);
    setVal('c-pastrim', pas);
    setVal('c-gati', gat);
    setVal('c-marrje', mar);
    setVal('c-paplo-top', pap);
  }

  function setVal(id, v){
    const el = document.getElementById(id);
    if (el) el.textContent = String(v);
  }

  window.addEventListener('DOMContentLoaded', ()=>{
    loadCounters();
    subscribeOrders(()=> loadCounters());
  });
</script>
</head>
<body>
  <div class="header">
    <a class="arka" href="/arka/">â‚¬ ARKA</a>
    <div class="brand">
      <div class="logo">ðŸ§¼</div>
      <div class="company">
        <div class="name">KOMPANIA JONI</div>
        <div class="sub">HOME</div>
      </div>
    </div>
  </div>

  <div class="page">
    <div class="shell">
      <div class="tiles">
        <a class="tile" href="/paplotesuara/">
          <h3>PAPLOTÃ‹SUARA</h3>
          <div class="count c-red" id="c-paplo-top">0</div>
        </a>
        <a class="tile" href="/pastrimi/">
          <h3>PASTRIMI</h3>
          <div class="count c-blue" id="c-pastrim">0</div>
        </a>
        <a class="tile" href="/gati/">
          <h3>GATI</h3>
          <div class="count c-green" id="c-gati">0</div>
        </a>
        <a class="tile" href="/gati/">
          <h3>MARRJE SOT</h3>
          <div class="count c-green" id="c-marrje">0</div>
        </a>
      </div>
    </div>

    <a class="cta green" href="/pranimi/">+ KLIENT I RI</a>
    <a class="cta amber" href="/transport/">ðŸšš TRANSPORT AKTIV <span class="right" id="c-trans">0</span></a>

    <div class="group">
      <h4>KLIENTÃ‹T E BAZÃ‹S â€” KÃ‹RKO</h4>
      <div class="search">
        <input placeholder="Shkruaj: X01 ose emÃ«r ose telefon">
      </div>
    </div>

    <div class="group">
      <h4>TRANSPORT â€” KODI T</h4>
      <div class="search">
        <input placeholder="T2">
        <a class="btn" href="/transport/">KÃ‹RKO</a>
      </div>
    </div>
  </div>

  <script src="/assets/client_profile.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', ()=>{
      if (window.bindClientBadges) { try { window.bindClientBadges(); } catch(e){} }
    });
  </script>
</body>
</html>